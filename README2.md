# the-ae

- [ ] Use MySQL's UUID() function to generate UUIDs.
- [ ] use Yarn's uuid package to generate uuids for images in google cloud.
- [ ] fontawesome for icons
- [ ] ES6 using babel
- [ ] image storing --> [google cloud storage using buckets](https://www.youtube.com/watch?v=pGSzMfKBV9Q)
- [ ] [MySQL `timestamp` cheatsheet](https://stackoverflow.com/questions/19023978/should-mysql-have-its-timezone-set-to-utc)
- [ ] languages are done using [ISO 639-1](https://en.wikipedia.org/wiki/ISO_639-1)

## General

This posting must only be done by registered (by us, by email) students/staff for targeting sake.

Maybe a registered student can post to any school? No.

## Routing

- `/` --  
  Redirects to --> `/~:area` depending on the location of the request. If no location is provided, a random or close one will be chosen.
- `/~:area` --  
  describes school/area
  - `/search/:category?postedToday=1&hasPic=1&searchTitles=1` --  
    URL parameters are **optional**; they should be present on the search page.  
    **NOTE:** the `category` variable is a unique three letter or one letter identifier for a CATECORY or TYPE (respectively); both will have to be searched to identify which is being queried. If it is a type, ALL categories for that are in the type will be searched.
  - `/posting/:shortTitle/:post_id` --  
    The shortTitle is simply for readability of URL.  
    The post_id is simply right from the database.
- `/post` --  
  creates a new post and redirects to Ë…
  - `/:account_id/:post_id?s=type|cat|edit|geo|preview` --  
    this is creating a new post or referencing an old one. URL argument **is** required.
- `/account` --  
  check-for/validate cookie on backend and either return logon page or account home

## Database Specifications

Tables:

- [posts](#posts)
- [images](#images)
- [users](#users)
- [areas](#areas)
- [categories](#categories)
- [types](#types)

### Posts

#### posts

| Name            | Example                                                | Definition                                                                  | MySQL Name      | MySQL Type                                                        |
| --------------- | ------------------------------------------------------ | --------------------------------------------------------------------------- | --------------- | ----------------------------------------------------------------- |
| Post ID         | 7a8g524a-d217-1...                                     | uuid generated id using MySQL's `UUID()` function                           | post_id         | `text primary key`                                                |
| User ID         | 4b8f595a-d217-1...                                     | UUID of the user from the `users` table that created the posting            | user_id         | `text`                                                            |
| Category ID     | 1                                                      | ID of the category from `categories` table that the post lies under         | category_id     | `int unsigned not null auto_increment key`                        |
| Post Created At | 2020-07-30 23:05:28                                    | The time (generated by MySQL) that the post was created at                  | post_created_at | `timestamp default current_timestamp`                             |
| Post Updated At | 2020-07-31 23:05:28                                    | Time (generated by MySQL) that the post was updated at (any fields changed) | post_updated_at | `timestamp default current_timestamp on update current_timestamp` |
| Title           | Red Giant Bike 2016                                    | Title of the post                                                           | title           | `text`                                                            |
| Description     | In good condition. Need it sold fast                   | Description for the post                                                    | description     | `text`                                                            |
| Language        | en                                                     | [ISO 639-1](https://en.wikipedia.org/wiki/ISO_639-1) language ID            | language        | `text(10)`                                                        |
| Is Seller       | 0                                                      | Can be 1 or 0 depending on if the post is from a seller or not              | is_seller       | `tinyint(1)`                                                      |
| Has Images      | 0                                                      | Can be 1 or 0 depending on if the post has attached images                  | has_images      | `tinyint(1)`                                                      |
| Attributes      | "{"model":"Giant","color":"blue","tireSize":"2 feet"}" | JSON.stringify version of any extra atributes about the posting             | attributes      | `text`                                                            |

#### images

| Name      | Example                                                                               | Definition                                                  | MySQL Name | MySQL Type |
| --------- | ------------------------------------------------------------------------------------- | ----------------------------------------------------------- | ---------- | ---------- |
| Post ID   | 7a8g524a-d217-1...                                                                    | The ID of the post from `posts` table that the image is for | post_id    | `text`     |
| Image URL | https://storage.googleapis.com/the-academia-exchange-images/Snapchat-1237905704_2.jpg | URL of the image for the post                               | image_url  | `text`     |

### Users

#### users

| Name                 | Example               | Definition                                                                                                 | MySQL Name           | MySQL Type                            |
| -------------------- | --------------------- | ---------------------------------------------------------------------------------------------------------- | -------------------- | ------------------------------------- |
| User ID              | 4b8f595a-d217-1...    | uuid generated id using MySQL's `UUID()` function                                                          | user_id              | `text primary key`                    |
| Email                | george@washington.com | The user's unique email address.                                                                           | email                | `text not null unique`                |
| Password             | d3822b5f03a...        | The SHA256-hashed user password                                                                            | password_hash        | `text`                                |
| Prefered Language ID | en                    | [ISO 639-1](https://en.wikipedia.org/wiki/ISO_639-1) language ID                                           | prefered_language_id | `text(10)`                            |
| Prefered Area ID     | 1                     | The prefered area/school for the user from the `areas` DB                                                  | prefered_area_id     | `number`                              |
| Account Created At   | 2020-07-30 23:05:28   | The time/date when the accound was created (MySQL stores in UTC; selection varies by parameters or region) | account_created_at   | `timestamp default current_timestamp` |

### Locations

#### areas

The areas are really schools. The name is simply for the prospect of extendibility in the future.

> --> Everything is kept very school-specific because if it is opened to any area, it becomes a clone of CL.

> The surrounding community can, however, buy from the site.

| Name          | Example                             | Definition                                                                                                                                                                                                                                                                                                             | MySQL Name    | MySQL Type                                 |
| ------------- | ----------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------- | ------------------------------------------ |
| AreaID        | 1                                   | An integer, defined by us, that uniquely identifies the area                                                                                                                                                                                                                                                           | area_id       | `int unsigned not null auto_increment key` |
| Hostname      | uno                                 | our unique hostname for the Area (e.g. `/~uno`, `/~dartmouth`, `/~stanford/`)                                                                                                                                                                                                                                          | hostname      | `text not null unique`                     |
| Latitude      | 47.500000                           | about the center of the area latidudinally                                                                                                                                                                                                                                                                             | lat           | `decimal(10, 8) not null`                  |
| Longitude     | 39.000000                           | about the center of the area longitudinally                                                                                                                                                                                                                                                                            | lon           | `decimal(11, 8) not null`                  |
| Country       | US                                  | Area's [ISO 3166-1 alpha-2](http://en.wikipedia.org/wiki/ISO_3166-1_alpha-2) two-letter country code                                                                                                                                                                                                                   | country       | `varchar(2) not null unique`               |
| Region        | Nebraska                            | State, province, etc.                                                                                                                                                                                                                                                                                                  | region        | `text`                                     |
| Description   | The University of Nebraska at Omaha | Short name/description of the area                                                                                                                                                                                                                                                                                     | description   | `text`                                     |
| Timezone      | America/Chicago                     | Area's time zone formatted according to the [IANA Time Zone Database](http://www.iana.org/time-zones) (aka [tz database](http://en.wikipedia.org/wiki/IANA_time_zone_database) / tzdata / zoneinfo database / Olsen database). [List of timezone names](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones). | timezone      | `text`                                     |
| Area Added At | 2020-07-30 23:05:28                 | Date/time that the area was added to the MySQL database (UTC-stored)                                                                                                                                                                                                                                                   | area_added_at | `timestamp default current_timestamp`      |

### Categories

#### categories

| Name         | Example               | Definition                                                       | MySQL Name   | MySQL Type                                 |
| ------------ | --------------------- | ---------------------------------------------------------------- | ------------ | ------------------------------------------ |
| CategoryID   | 1                     | An integer, defined by us unique Category identifier             | category_id  | `int unsigned not null auto_increment key` |
| Abbreviation | apa                   | A unique, three-letter/digit defined-by-us Category Abbreviation | abbreviation | `text(3) not null unique`                  |
| Description  | apts/housing for rent | we define this text description of the Category                  | description  | `text`                                     |
| Type         | B                     | Category type, [see below](#category-types)                      | type         | `text(2)`                                  |

#### types

| Name        | Example  | Definition                                                          | MySQL Name  | MySQL Type                    |
| ----------- | -------- | ------------------------------------------------------------------- | ----------- | ----------------------------- |
| Type        | B        | A (probably) 1 letter section title                                 | type        | `text(2) not null unique key` |
| Description | Services | A short description of the type. Will be viewable on the front page | description | `text not null`               |

What the category types will be (+/- a few):

| Type | Description       |
| ---- | ----------------- |
| B    | Services          |
| C    | Community         |
| E    | Events            |
| G    | Gigs              |
| H    | Housing           |
| J    | Jobs              |
| P    | Personals         |
| R    | Resumes           |
| S    | For Sale / Wanted |
